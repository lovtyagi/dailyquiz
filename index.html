<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kids Daily Quiz</title>
<script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>

<style>
body {
    margin: 0;
    font-family: 'Comic Sans MS', Arial;
    background: linear-gradient(#E1F5FE, #B3E5FC);
    text-align: center;
}

.header {
    background: #03A9F4;
    color: white;
    padding: 18px;
    font-size: 26px;
    font-weight: bold;
}

.stars {
    margin: 10px;
    font-size: 20px;
    color: #FF9800;
}

.container {
    padding: 20px;
}

.start-btn {
    background: #4CAF50;
    color: white;
    font-size: 22px;
    padding: 16px;
    border-radius: 20px;
    border: none;
    width: 90%;
    max-width: 320px;
}

.day-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 14px;
    margin-top: 20px;
}

.day-btn {
    background: white;
    border-radius: 16px;
    padding: 14px;
    font-size: 18px;
    border: none;
    box-shadow: 0 4px 10px rgba(0,0,0,0.15);
}

.locked {
    background: #E0E0E0;
    color: #999;
}

.footer {
    margin: 25px;
    font-size: 14px;
    color: #555;
}
</style>
</head>

<body>

<div class="header">
    üß† Kids Daily Quiz
</div>

<div class="stars" id="starsText">
    ‚≠ê Stars: 0
</div>

<!-- Lottie Animation -->
<lottie-player
    src="https://assets10.lottiefiles.com/packages/lf20_jcikwtux.json"
    background="transparent"
    speed="1"
    style="width:200px;height:200px;margin:auto"
    loop
    autoplay>
</lottie-player>

<div class="container">

    <button class="start-btn" onclick="openTodayQuiz()">
        ‚ñ∂ Start Today‚Äôs Quiz
    </button>

    <h3>üìÖ Daily Levels</h3>

    <div class="day-grid" id="dayGrid"></div>

    <div class="footer">
        üåü Learn ‚Ä¢ Play ‚Ä¢ Grow üåü
    </div>
</div>

<script>
/* ---------- VOICE WELCOME ---------- */
window.onload = () => {
    speak("Hello! Let's play today's quiz!");
    updateStars();
    renderDays();
};

function speak(text) {
    if ('speechSynthesis' in window) {
        const msg = new SpeechSynthesisUtterance(text);
        msg.rate = 0.9;
        msg.pitch = 1.1;
        speechSynthesis.speak(msg);
    }
}

/* ---------- STARS SYSTEM ---------- */
function updateStars() {
    const stars = localStorage.getItem("stars") || 0;
    document.getElementById("starsText").innerText =
        "‚≠ê Stars: " + stars;
}

/* ---------- DAY LOGIC ---------- */
const TOTAL_DAYS = 10;

function getUnlockedDay() {
    return parseInt(localStorage.getItem("unlockedDay") || "1");
}

function renderDays() {
    const grid = document.getElementById("dayGrid");
    grid.innerHTML = "";

    const unlockedDay = getUnlockedDay();

    for (let i = 1; i <= TOTAL_DAYS; i++) {
        const btn = document.createElement("button");
        btn.innerText = "Day " + i;
        btn.className = "day-btn";

        if (i > unlockedDay) {
            btn.classList.add("locked");
            btn.innerText += " üîí";
        } else {
            btn.onclick = () => openDay(i);
        }

        grid.appendChild(btn);
    }
}

function openTodayQuiz() {
    const unlockedDay = getUnlockedDay();
    openDay(unlockedDay);
}

function openDay(day) {
    window.location.href = "day" + day + ".html";
}

/* ---------- CALLED FROM ANDROID ---------- */

/* ---------- CALLED FROM ANDROID WHEN QUIZ COMPLETES ---------- */

function onQuizCompleted(score) {
    // ‚≠ê Update stars + unlock next day
    unlockNextDay(score);

    // üéâ Kid-friendly voice feedback
    speak("Great job! You earned " + score + " stars!");

    // Optional: visual alert
    alert("üéâ Great job!\nYou earned " + score + " ‚≠ê");
}

function unlockNextDay(score) {
    let stars = parseInt(localStorage.getItem("stars") || "0");
    stars += score;
    localStorage.setItem("stars", stars);

    let unlockedDay = getUnlockedDay();
    if (unlockedDay < TOTAL_DAYS) {
        localStorage.setItem("unlockedDay", unlockedDay + 1);
    }

    updateStars();
    renderDays();
}
</script>

</body>
</html>
